!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.ReactARIA=t(require("React"),require("ReactDOM")):e.ReactARIA=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="dist/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=r(o);t.AriaManager=i["default"];var u=n(7),s=r(u);t.Toggle=s["default"];var a=n(9),c=r(a);t.Menu=c["default"];var l=n(10),f=r(l);t.MenuItem=f["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,s=c=void 0}},a=n(2),c=(r(a),n(3)),l=r(c),f=n(4),p=r(f),d=n(6),h=r(d),v=function(e,t){return e===t||e.contains(t)},y={tag:a.PropTypes.string,children:a.PropTypes.oneOfType([a.PropTypes.func,a.PropTypes.node]).isRequired,stringSearch:a.PropTypes.bool,forwardArrows:a.PropTypes.arrayOf(a.PropTypes.string),backArrows:a.PropTypes.arrayOf(a.PropTypes.string),wrap:a.PropTypes.bool,stringSearch:a.PropTypes.bool,stringSearchDelay:a.PropTypes.number,onSelection:a.PropTypes.func.isRequired,closeOnSelection:a.PropTypes.bool},_=function(e){function t(){var e=this;o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments),this.state={isOpen:!1},this._focusGroup=(0,l["default"])(this.props),this._toggle=null,this._menu=null,this._items=[],this._setToggle=function(t){e._toggle=t},this._setMenu=function(t){e._menu=t},this._addItem=function(t){e._items.push(t),e._focusGroup.addMember(t)},this._removeItem=function(t){var n=e._items.indexOf(t);n>-1&&e._items.splice(n,1),e._focusGroup.removeMember(t)},this._clearItems=function(){e._focusGroup.clearMembers()},this._focusItem=function(t){e._focusGroup.focusNodeAtIndex(t)},this._openMenu=function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];e.state.isOpen||(e.setState({isOpen:!0}),e._focusGroup.activate(),t&&e._focusItem(0))},this._closeMenu=function(){var t=arguments.length<=0||void 0===arguments[0]||arguments[0];e.state.isOpen&&(e.setState({isOpen:!1}),e._focusGroup.deactivate(),t&&e._toggle.focus())},this._toggleMenu=function(){e.state.isOpen?e._closeMenu():e._openMenu()}}return i(t,e),u(t,[{key:"getChildContext",value:function(){return{ariaManager:{isOpen:this.state.isOpen,onSelection:this._onSelection,setToggle:this._setToggle,setMenu:this._setMenu,addItem:this._addItem,removeItem:this._removeItem,clearItems:this._clearItems,focusItem:this._focusItem,openMenu:this._openMenu,closeMenu:this._closeMenu,toggleMenu:this._toggleMenu}}}},{key:"componentWillMount",value:function(){p["default"].add(this)}},{key:"componentWillUnmount",value:function(){this._focusGroup.deactivate(),this._toggle=null,this._menu=null,this._items=[],p["default"].remove(this)}},{key:"_onTap",value:function(e){var t=e.target,n=this._toggle.getAttribute("disabled");if(v(this._toggle,t)&&null===n)this._toggleMenu();else if(this._menu&&!v(this._menu,t))this._closeMenu(!1);else for(var r=this._items.length;r--;){var o=this._items[r];o.node===t&&this._onSelection(o,e)}}},{key:"_onKeyDown",value:function(e){var t=e.key,n=e.target;if(this.state.isOpen){if("Tab"===t)this._closeMenu(!1);else if("Escape"===t)e.preventDefault(),this._closeMenu();else if(["Enter"," "].indexOf(t)>-1)for(var r=this._items.length;r--;){var o=this._items[r];o.node===n&&(e.preventDefault(),this._onSelection(o,e))}}else["ArrowUp","ArrowDown","Enter"," "].indexOf(t)>-1&&v(this._toggle,n)&&(e.preventDefault(),this._openMenu())}},{key:"_onSelection",value:function(e,t){var n=e.value||e.node.innerHTML;this.props.closeOnSelection&&this._closeMenu(),this.props.onSelection(n,t)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.children,r=(0,h["default"])({},this.props,y);return"function"==typeof n?n(this.state.isOpen):(0,a.createElement)(t,r,n)}}],[{key:"childContextTypes",value:{ariaManager:a.PropTypes.object.isRequired},enumerable:!0},{key:"propTypes",value:y,enumerable:!0},{key:"defaultProps",value:{tag:"div",stringSearch:!0,forwardArrows:["right","down"],backArrows:["left","up"],wrap:!0,stringSearch:!0,stringSearchDelay:600,onSelection:function(){return null},closeOnSelection:!0},enumerable:!0}]),t}(a.Component);t["default"]=_,e.exports=t["default"]},function(t,n){t.exports=e},function(e,t){"use strict";function n(e){e=e||{},this._settings={forwardArrows:e.forwardArrows||["down"],backArrows:e.backArrows||["up"],wrap:e.wrap,stringSearch:e.stringSearch,stringSearchDelay:800},this._searchString="",this._members=[],e.members&&this.setMembers(e.members),this._boundHandleKeydownEvent=this._handleKeydownEvent.bind(this)}function r(e){return"ArrowUp"===e.key||38===e.keyCode?"up":"ArrowDown"===e.key||40===e.keyCode?"down":"ArrowLeft"===e.key||37===e.keyCode?"left":"ArrowRight"===e.key||39===e.keyCode?"right":null}function o(e){return e>=65&&e<=90}function i(e){e&&e.focus&&(e.focus(),"input"===e.tagName.toLowerCase()&&e.select())}n.prototype.activate=function(){return document.addEventListener("keydown",this._boundHandleKeydownEvent,!0),this},n.prototype.deactivate=function(){return document.removeEventListener("keydown",this._boundHandleKeydownEvent,!0),this._clearSearchStringRefreshTimer(),this},n.prototype._handleKeydownEvent=function(e){var t=this._getActiveElementIndex();if(t!==-1){var n=r(e);return n?this._settings.forwardArrows.indexOf(n)!==-1?(e.preventDefault(),void this.moveFocusForward()):this._settings.backArrows.indexOf(n)!==-1?(e.preventDefault(),void this.moveFocusBack()):void 0:void this._handleNonArrowKey(e)}},n.prototype.moveFocusForward=function(){var e,t=this._getActiveElementIndex();return e=t<this._members.length-1?t+1:this._settings.wrap?0:t,this.focusNodeAtIndex(e),e},n.prototype.moveFocusBack=function(){var e,t=this._getActiveElementIndex();return e=t>0?t-1:this._settings.wrap?this._members.length-1:t,this.focusNodeAtIndex(e),e},n.prototype._handleNonArrowKey=function(e){if(this._settings.stringSearch){if(""!==this._searchString&&(" "===e.key||32===e.keyCode))return e.preventDefault(),-1;if(!o(e.keyCode))return-1;if(e.ctrlKey||e.metaKey||e.altKey)return-1;e.preventDefault(),this._addToSearchString(String.fromCharCode(e.keyCode)),this._runStringSearch()}},n.prototype._clearSearchString=function(){this._searchString=""},n.prototype._addToSearchString=function(e){this._searchString+=e.toLowerCase()},n.prototype._startSearchStringRefreshTimer=function(){var e=this;this._clearSearchStringRefreshTimer(),this._stringSearchTimer=setTimeout(function(){e._clearSearchString()},this._settings.stringSearchDelay)},n.prototype._clearSearchStringRefreshTimer=function(){clearTimeout(this._stringSearchTimer)},n.prototype._runStringSearch=function(){this._startSearchStringRefreshTimer(),this.moveFocusByString(this._searchString)},n.prototype.moveFocusByString=function(e){for(var t,n=0,r=this._members.length;n<r;n++)if(t=this._members[n],t.text&&0===t.text.indexOf(e))return i(t.node)},n.prototype._findIndexOfNode=function(e){for(var t=0,n=this._members.length;t<n;t++)if(this._members[t].node===e)return t;return-1},n.prototype._getActiveElementIndex=function(){return this._findIndexOfNode(document.activeElement)},n.prototype.focusNodeAtIndex=function(e){var t=this._members[e];return t&&i(t.node),this},n.prototype.addMember=function(e,t){var n=e.node||e,r=e.text||n.getAttribute("data-focus-group-text")||n.textContent||"";this._checkNode(n);var o=r.replace(/[\W_]/g,"").toLowerCase(),e={node:n,text:o};return null!==t&&void 0!==t?this._members.splice(t,0,e):this._members.push(e),this},n.prototype.removeMember=function(e){var t="number"==typeof e?e:this._findIndexOfNode(e);if(t!==-1)return this._members.splice(t,1),this},n.prototype.clearMembers=function(){return this._members=[],this},n.prototype.setMembers=function(e){this.clearMembers();for(var t=0,n=e.length;t<n;t++)this.addMember(e[t]);return this},n.prototype.getMembers=function(){return this._members},n.prototype._checkNode=function(e){if(!e.nodeType||e.nodeType!==window.Node.ELEMENT_NODE)throw new Error("focus-group: only DOM nodes allowed");return e},e.exports=function(e){return new n(e)}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),i=r(o);t["default"]={_queue:[],add:function(e){this._queue.push(e),1===this._queue.length&&this._attachListeners()},remove:function(e){var t=this._queue.indexOf(e);t>-1&&this._queue.splice(t,1),this._queue.length<=0&&this._detachListeners()},_attachListeners:function(){this._tapListener=(0,i["default"])(document.documentElement,this._documentEvent.bind(this,"_onTap")),document.addEventListener("keydown",this._documentEvent.bind(this,"_onKeyDown"))},_detachListeners:function(){this._tapListener.remove(),document.removeEventListener("keydown",this._documentEvent)},_documentEvent:function(e,t){for(var n=this._queue.length;n--;)this._queue[n][e](t)}},e.exports=t["default"]},function(e,t){"use strict";e.exports=function(e,t,n){function r(e){h||t(e)}function o(t){h=!0,p||(p=!0,e.addEventListener("touchmove",i,n),e.addEventListener("touchend",u,n),e.addEventListener("touchcancel",s,n),d=!1,l=t.touches[0].clientX,f=t.touches[0].clientY)}function i(e){d||Math.abs(e.touches[0].clientX-l)<=10&&Math.abs(e.touches[0].clientY-f)<=10||(d=!0)}function u(e){p=!1,a(),d||t(e)}function s(){p=!1,d=!1,l=0,f=0}function a(){e.removeEventListener("touchmove",i,n),e.removeEventListener("touchend",u,n),e.removeEventListener("touchcancel",s,n)}function c(){e.removeEventListener("click",r,n),e.removeEventListener("touchstart",o,n),a()}var l=0,f=0,p=!1,d=!1,h=!1;return e.addEventListener("click",r,n),e.addEventListener("touchstart",o,n),{remove:c}}},function(e,t){"use strict";function n(e,t,n){for(var r in t)t.hasOwnProperty(r)&&!n[r]&&(e[r]=t[r]);return e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,s=c=void 0}},a=n(2),c=(r(a),n(8)),l=(r(c),n(6)),f=r(l),p={tag:a.PropTypes.string,children:a.PropTypes.node.isRequired},d=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this.context.ariaManager.setToggle((0,c.findDOMNode)(this))}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.disabled,r=e.children,o=(0,f["default"])({role:"button",tabIndex:n?"":"0","aria-haspopup":!0,"aria-expanded":this.context.ariaManager.isOpen,"aria-disabled":n},this.props,p);return(0,a.createElement)(t,o,r)}}],[{key:"contextTypes",value:{ariaManager:a.PropTypes.object.isRequired},enumerable:!0},{key:"defaultProps",value:{tag:"button"},enumerable:!0}]),t}(a.Component);t["default"]=d,e.exports=t["default"]},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,s=c=void 0}},a=n(2),c=(r(a),n(8)),l=(r(c),n(6)),f=r(l),p={tag:a.PropTypes.string,children:a.PropTypes.node.isRequired},d=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this._setMenuNode()}},{key:"componentDidUpdate",value:function(e,t,n){this.context.ariaManager.isOpen!==n.ariaManager.isOpen&&this._setMenuNode()}},{key:"_setMenuNode",value:function(){this.context.ariaManager.setMenu((0,c.findDOMNode)(this))}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.children,r=(0,f["default"])({role:"menu"},this.props,p);return(0,a.createElement)(t,r,n)}}],[{key:"contextTypes",value:{ariaManager:a.PropTypes.object.isRequired},enumerable:!0},{key:"defaultProps",value:{tag:"div"},enumerable:!0}]),t}(a.Component);t["default"]=d,e.exports=t["default"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=function(e,t,n){for(var r=!0;r;){var o=e,i=t,u=n;r=!1,null===o&&(o=Function.prototype);var s=Object.getOwnPropertyDescriptor(o,i);if(void 0!==s){if("value"in s)return s.value;var a=s.get;if(void 0===a)return;return a.call(u)}var c=Object.getPrototypeOf(o);if(null===c)return;e=c,t=i,n=u,r=!0,s=c=void 0}},a=n(2),c=(r(a),n(8)),l=(r(c),n(6)),f=r(l),p={tag:a.PropTypes.string,children:a.PropTypes.node.isRequired},d=function(e){function t(){o(this,t),s(Object.getPrototypeOf(t.prototype),"constructor",this).apply(this,arguments)}return i(t,e),u(t,[{key:"componentDidMount",value:function(){this._node=(0,c.findDOMNode)(this),this.context.ariaManager.addItem({node:this._node,text:this.props.text})}},{key:"componentWillUnmount",value:function(){this.context.ariaManager.removeItem(this._node)}},{key:"render",value:function(){var e=this.props,t=e.tag,n=e.children,r=(0,f["default"])({role:"menuitem",tabIndex:-1},this.props,p);return(0,a.createElement)(t,r,n)}}],[{key:"contextTypes",value:{ariaManager:a.PropTypes.object.isRequired},enumerable:!0},{key:"defaultProps",value:{tag:"div"},enumerable:!0}]),t}(a.Component);t["default"]=d,e.exports=t["default"]}])});